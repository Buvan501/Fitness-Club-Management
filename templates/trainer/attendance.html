{% extends 'base.html' %}
{% block title %}Attendance | Trainer{% endblock %}
{% block content %}
<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="mb-0">Today's Schedules</h2>
    <span class="text-muted"><i class="bi bi-calendar me-1"></i>{{ today.strftime('%A, %b %d, %Y') }}</span>
  </div>

  {% if schedules %}
  <div class="table-responsive">
    <table class="table table-striped table-hover align-middle">
      <thead>
        <tr>
          <th>Class</th>
          <th>Time</th>
          <th>Room</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        {% for s in schedules %}
        <tr>
          <td class="fw-semibold">{{ s.class_.name }}</td>
          <td>{{ s.start_time.strftime('%I:%M %p') }} - {{ s.end_time.strftime('%I:%M %p') }}</td>
          <td>{{ s.room or '-' }}</td>
          <td>
            <button class="btn btn-sm btn-outline-success" data-schedule-id="{{ s.id }}" onclick="goToAttendance(this)">
              <i class="bi bi-check2-square me-1"></i>Mark Attendance
            </button>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <div class="alert alert-info"><i class="bi bi-info-circle me-2"></i>No schedules for today.</div>
  {% endif %}
</div>
{% endblock %}

{% block extra_js %}
<script>
function goToAttendance(btn) {
  const id = btn.getAttribute('data-schedule-id');
  // Placeholder: navigate or open a modal to mark attendance for this schedule
  // You can extend this to list booked members and call /api/mark-attendance
  alert('Open attendance marking for schedule #' + id);
}
</script>
{% endblock %}
